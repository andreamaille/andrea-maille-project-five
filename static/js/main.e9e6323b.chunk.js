(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(78)},59:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),n=a(7),i=a.n(n),c=a(17),l=a(11),o=a(12),m=a(14),d=a(13),u=a(15),h=a(16),p=a.n(h),f=(a(59),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.scrollToMyRef()}},{key:"render",value:function(){return s.a.createElement("li",{className:"related-artist-card"},s.a.createElement("div",{className:"inner-wrapper"},s.a.createElement("h3",null,this.props.artist),s.a.createElement("div",{className:"image-container"},s.a.createElement("a",{href:this.props.albumUrl},s.a.createElement("img",{src:this.props.imageUrl,alt:" "}))),s.a.createElement("div",{className:"album-info"},s.a.createElement("a",{href:this.props.albumUrl,className:"album-link"},s.a.createElement("p",null,"Listen to ",this.props.albumName)),s.a.createElement("p",null,"Plays:",this.props.playCount))))}}]),t}(r.Component)),E=function(e){return s.a.createElement(r.Fragment,null,s.a.createElement("li",{className:"related-tracks-names"},s.a.createElement("a",{href:e.songUrl,className:"related-track-links"},e.songName)))},v=a(34),A=a(23),N=a.n(A);N.a.initializeApp({apiKey:"AIzaSyDuTCV6q-STDeYeH75CRP0fCxAQOaSLOp0",authDomain:"next-on-shuffle.firebaseapp.com",databaseURL:"https://next-on-shuffle.firebaseio.com",projectId:"next-on-shuffle",storageBucket:"next-on-shuffle.appspot.com",messagingSenderId:"812406334305",appId:"1:812406334305:web:0698567276d72ea0"});var b=N.a,k=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).handleChange=function(t){e.setState({userInput:t.target.value})},e.handleClick=function(t){t.preventDefault();var a=e.state.userInput;e.setState({userArtist:a,isHidden:!1},function(){e.callApiSimilarArtists(),e.searchAgain()})},e.callApiSimilarArtists=function(){p()({method:"GET",url:"https://ws.audioscrobbler.com/2.0/",dataResponse:"JSON",params:{api_key:"4fb1117993625941ed0d8edc14f7ed9a",method:"artist.getSimilar",artist:e.state.userArtist,limit:6,autocorrect:1,format:"json"}}).then(function(t){t=t.data.similarartists.artist,e.setState({similarArtists:t},function(){0===e.state.similarArtists.length?e.noResults():(b.database().ref().push(e.state.userInput),e.getArtistInfo())})}).catch(function(t){e.resetForm(),e.searchError()})},e.getArtistInfo=function(){var t=Object(c.a)(e.state.similarArtists).map(function(e){return e.name});e.setState({relatedArtistArray:t},t.forEach(function(t){e.callApiTopAlbums(t),e.callApiTopTracks(t)})),e.getFirebaseArtists()},e.callApiTopAlbums=function(t){p()({method:"GET",url:"https://ws.audioscrobbler.com/2.0/",dataResponse:"JSON",params:{api_key:"4fb1117993625941ed0d8edc14f7ed9a",method:"artist.getTopAlbums",artist:t,limit:6,autocorrect:1,format:"json"}}).then(function(t){t=t.data.topalbums.album[0];var a=Object(c.a)(e.state.relatedArtistInfo);a.push(t),e.setState({relatedArtistInfo:a,isLoading:!1})}).catch(function(e){alert("Sorry - we failed to get data back from our API at this time. Please check back later!")})},e.callApiTopTracks=function(t){p()({method:"GET",url:"https://ws.audioscrobbler.com/2.0/",dataResponse:"JSON",params:{api_key:"4fb1117993625941ed0d8edc14f7ed9a",method:"artist.gettoptracks",artist:t,limit:6,autocorrect:1,format:"json"}}).then(function(t){t=t.data.toptracks.track;var a=Object(c.a)(e.state.relatedArtistTracks);a.push(t),e.setState({relatedArtistTracks:a})}).catch(function(e){alert("Sorry - we failed to get data back from our API at this time. Please check back later!")})},e.getFirebaseArtists=function(){b.database().ref().limitToLast(5).on("value",function(t){var a=[],r=t.val();for(var s in r)a.push({id:s,name:r[s]});e.setState({recentlyViewedArtists:a})})},e.artistSearch=function(t){t.preventDefault();var a=t.currentTarget.dataset.id;e.setState({userInput:a,userArtist:a,relatedArtistArray:[],relatedArtistInfo:[],relatedArtistTracks:[],recentlyViewedArtists:[]},function(){e.callApiSimilarArtists()})},e.resetForm=function(){e.setState({isLoading:!0,isReset:!0,isHidden:!0,isArtistUnknown:!0,noResults:!0,userArtist:"",userInput:"",relatedArtistArray:[],relatedArtistInfo:[],relatedArtistTracks:[]})},e.searchAgain=function(){e.setState({isLoading:!0,isReset:!1,isArtistUnknown:!0,noResults:!0})},e.searchError=function(){e.setState({isArtistUnknown:!1})},e.noResults=function(){e.setState({isHidden:!0,noResults:!1,isArtistUnknown:!0,isReset:!0})},e.scrollToMyRef=function(){window.scrollTo(0,e.headingElement.current.offsetTop)},e.headingElement=s.a.createRef(),e.state={isLoading:!0,isHidden:!0,isReset:!0,isArtistUnknown:!0,noResults:!0,userArtist:"",userInput:"",relatedArtistArray:[],relatedArtistInfo:[],relatedArtistTracks:[],recentlyViewedArtists:[]},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(r.Fragment,null,s.a.createElement("header",null,s.a.createElement("div",{className:"wrapper header-content"},s.a.createElement("div",{className:"header-text"},s.a.createElement("h1",{tabIndex:"1"},"Next on Shuffle"),s.a.createElement("div",{className:"app-description",tabIndex:"2"},s.a.createElement("p",{className:"subtitle"},"New music is waiting for you."),s.a.createElement("p",null,"Discover new music with the music you already love. Enter your favorite artist or band to get started")),this.state.isReset?s.a.createElement("form",{action:"search-artists",method:"POST",name:"search-artists"},s.a.createElement("label",{htmlFor:"search-button",className:"visually-hidden"},"Enter your artist"),s.a.createElement("input",{onChange:this.handleChange,type:"text",placeholder:"Search for Artist",value:this.state.userInput,id:"search-button",name:"search-button"}),s.a.createElement(v.Link,{activeClass:"active",to:"related-artists",id:"related-artists",spy:!0,smooth:!0,offset:-70,duration:500},s.a.createElement("button",{onClick:this.handleClick,className:"main-search-button","aria-label":"After clicking on this button, you will be taken directly to the Related Artists Section"},"Search"))):s.a.createElement("div",{className:"header-reset"},s.a.createElement("div",{className:"spinner"},s.a.createElement("div",{className:"rect1"}),s.a.createElement("div",{className:"rect2"}),s.a.createElement("div",{className:"rect3"}),s.a.createElement("div",{className:"rect4"}),s.a.createElement("div",{className:"rect5"}),s.a.createElement("div",{className:"rect1"}),s.a.createElement("div",{className:"rect2"}),s.a.createElement("div",{className:"rect3"}),s.a.createElement("div",{className:"rect4"}),s.a.createElement("div",{className:"rect5"}),s.a.createElement("div",{className:"rect1"}),s.a.createElement("div",{className:"rect2"}),s.a.createElement("div",{className:"rect3"}),s.a.createElement("div",{className:"rect4"}),s.a.createElement("div",{className:"rect5"})),s.a.createElement("p",null,"Want more music?"),s.a.createElement("button",{onClick:this.resetForm,className:"header-reset-button"},"Search for Another Artist")),this.state.isArtistUnknown?" ":s.a.createElement("p",{tabIndex:"3",className:"error-message"},"We couldn't find your requested artist. Please check spelling and try again!"),this.state.noResults?" ":s.a.createElement("p",{tabIndex:"3",className:"error-message"},"There are no related artists for ",s.a.createElement("span",null,this.state.userArtist),". Try another artist!")))),this.state.isLoading?" ":s.a.createElement("main",{role:"status","aria-live":"polite"},s.a.createElement("div",{className:"wrapper"},s.a.createElement("section",{className:"related-artists",id:"related-artists"},s.a.createElement("div",{className:"search-results"},s.a.createElement("h2",{ref:this.headingElement,tabIndex:"4"},"Related Artists"),s.a.createElement("ul",{className:"related-artist-results"},this.state.relatedArtistInfo.map(function(t,a){var r=t.image[3]["#text"];return s.a.createElement(f,{key:a,imageUrl:r,artist:t.artist.name,albumUrl:t.artist.url,playCount:t.playcount,albumName:t.name,scrollToMyRef:e.scrollToMyRef})})))),s.a.createElement("section",{className:"related-tracks"},s.a.createElement("div",{className:"related-tracks-wrapper"},s.a.createElement("h2",{tabIndex:"5"},"Top Tracks for ",this.state.userArtist),s.a.createElement("a",{href:"#recently-viewed-section",className:"visually-hidden skip-link"}," Skip Top Tracks Section for your chosen artist and skip to Recently Searched Artists"),s.a.createElement("ul",{className:"related-artist-tracks"},this.state.relatedArtistTracks.map(function(t,a){return t.map(function(t,a){return s.a.createElement(E,{key:a,headingRef:e.headingElement,songName:t.name,songUrl:t.url})})})))),s.a.createElement("section",{className:"recently-viewed-section",id:"recently-viewed-section"},s.a.createElement("div",{className:"recently-viewed-wrapper"},s.a.createElement("h2",{tabIndex:"6"},"Recently Viewed Artists"),s.a.createElement("ul",{className:"recent-artists"},this.state.recentlyViewedArtists.map(function(t,a){return s.a.createElement("li",{key:a,className:"recent-artists-card",onClick:e.artistSearch,"data-id":t.name},s.a.createElement("p",{className:"artist-name",tabIndex:a},t.name))})),s.a.createElement("button",{type:"reset",onClick:this.resetForm,className:"section-reset-button"},"Search Again"))))),s.a.createElement("footer",null,this.state.isHidden?" ":s.a.createElement("div",{className:"footer-text"},s.a.createElement("div",{className:"spinner"},s.a.createElement("div",{className:"rect1"}),s.a.createElement("div",{className:"rect2"}),s.a.createElement("div",{className:"rect3"}),s.a.createElement("div",{className:"rect4"}),s.a.createElement("div",{className:"rect5"}),s.a.createElement("div",{className:"rect1"}),s.a.createElement("div",{className:"rect2"}),s.a.createElement("div",{className:"rect3"}),s.a.createElement("div",{className:"rect4"}),s.a.createElement("div",{className:"rect5"}),s.a.createElement("div",{className:"rect1"}),s.a.createElement("div",{className:"rect2"}),s.a.createElement("div",{className:"rect3"}),s.a.createElement("div",{className:"rect4"}),s.a.createElement("div",{className:"rect5"})),s.a.createElement("p",null," \xa9 2019"),s.a.createElement("p",null,"Designed and coded by ",s.a.createElement("a",{href:"https://twitter.com/andrea_codes"},"andrea_codes")))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.e9e6323b.chunk.js.map